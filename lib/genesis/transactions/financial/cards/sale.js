// Generated by CoffeeScript 2.7.0
(function() {
  var CardBase, Sale, TransactionTypes, _;

  CardBase = require('./card_base');

  TransactionTypes = require('../../../helpers/transaction/types');

  _ = require('underscore');

  Sale = class Sale extends CardBase {
    getTransactionType() {
      return TransactionTypes.SALE;
    }

    isValid() {
      var valid;
      valid = super.isValid();
      if (this.params.recurring_type === 'subsequent' && _.isEmpty(this.params.reference_id)) {
        this.validator.addError({
          type: 'required',
          property: 'reference_id',
          message: 'Field reference_id has invalid value. Field reference_id is required'
        });
        return false;
      }
      return valid;
    }

  };

  module.exports = Sale;

}).call(this);
